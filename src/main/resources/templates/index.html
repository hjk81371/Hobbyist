<!DOCTYPE html>
<html>
<head>
    <title>Simple Website</title>

    <style>

        .introduction {
            position: fixed;
            bottom: 0;
            left: 50;
        }

        body {
            background-color: #f2f2f2;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        .textbox {
            position: fixed;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 50px;
            border-radius: 25px;
            border: 2px solid #aaa;
            background-color: #fff;
            padding: 10px;
            font-size: 16px;
            outline: none;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease-in-out;
        }
        
        .textbox:focus {
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
        }
        body {
            margin: 0;
            padding: 0;
        }
        
        .button {

            display: block;
            width: 200px;
            height: 60px;
            background-color: #4CAF50;
            color: #fff;
            text-align: center;
            line-height: 60px;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .ButDiv {
            position: fixed;
            top: 20%;
            left: 5%;

        }

        .ButDiv a {
            display: block;
            margin-bottom: 50px;
        }

        .add-button {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            display: inline-block;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            text-decoration: none;
            box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3);
        }
    
        .add-button:hover {
             background-color: #45a049;
        }

        .hobbyList {
            list-style-type: none;
            position: fixed;
            right: 5%;
            top: 5%;
        }

        /* Hover effect */
        .songList li:hover {
        background-color: #5c7686;
        cursor: pointer;
        }

        /* Click effect */
        .songList li.clicked {
        animation: clickAnimation 0.3s;
        }

        @keyframes clickAnimation {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.1);
        }
        100% {
            transform: scale(1);
        }
        }

        .songList {
            list-style-type: none;
            position: fixed;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
        }

        #similarMusicResult {
            list-style-type: none;
        }
            



    </style>

</head>
<body>
    <div class="introduction">
        <h1>Welcome to Hobbyist</h1>
    </div>
    
    <input id="addbox" type="text" class="textbox" placeholder="Add Hobby...">
    <button id="add-button" class="add-button" onclick="addHobby()">Add</button>

    <ul class="songList" id="songList"></ul>

    <div class="ButDiv">
        <a id="similarMusicButton" href="#" class="button">Similar Music</a>
        <a id="button2" href="#" class="button">Similar Books</a>
        <a id="button3" href="#" class="button">Similar Hobbies</a>
    </div>


    <li id="similarMusicResult"></li>

    <li class = hobbyList id="hobbyList"></li>

</body>












<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>

    function addHobby() {
        var hobbyToAdd = document.getElementById("addbox").value;

        if (hobbyToAdd) {

            $.ajax({
                url: "/api/find-hobby",
                type: "POST",
                data: hobbyToAdd,
                success: function(response) {

                    const jsonResponse = JSON.parse(response);

                    // Extract the necessary data
                    const trackMatches = jsonResponse.results.trackmatches;

                    if (trackMatches) {
                    const tracks = trackMatches.track;

                    var counter = 0;

                    if (Array.isArray(tracks)) {
                        tracks.forEach((track) => {

                        const songList = document.getElementById("songList");

                        // Create the list items and add click event listeners

                        if (counter > 5) {
                            return true;
                        }
                        counter++;

                        const listItem = document.createElement("li");
                        const songTitle = track.name;
                        const artistName = track.artist;

                        listItem.textContent = songTitle + " - " + artistName;
                        listItem.addEventListener("click", () => {
                            addHobbyAllInfo(songTitle, artistName);
                        });

                        songList.appendChild(listItem);

                        });

                    } else {
                        const artistName = tracks.artist;
                        console.log("Artist: " + artistName);
                    }
                    } else {
                    console.log("No tracks found for the given title.");
                    }

                },
                error: function(error) {
                    console.error("Error calling Java method:", error);
                }



                });
            }
        }

        function addHobbyAllInfo(title, artist) {



            const songList = document.getElementById("songList");
            songList.innerHTML = "";

            $.ajax({
                url: "/api/add-hobby",
                method: "POST",
                data: {
                    param1: title,
                    param2: artist
                },
                success: function() {
                    console.log("Hobby Added");
                    console.log("JAVASCRIPT TITLE: " + title);
                    console.log("JAVASCRIPT ARTIST: " + artist);
                },
                error: function(error) {
                    console.error("Error sending hobby to java: ", error);
                }
            });

            var newListElement = document.createElement("li");
            newListElement.textContent = title + " - " + artist;
            document.getElementById("hobbyList").appendChild(newListElement);
            
        }

        document.getElementById("similarMusicButton").addEventListener("click", () => {
            findSimilarMusic();
        });

        function findSimilarMusic() {
            const similarMusicResult = document.getElementById("similarMusicResult");
            $.ajax({
                url: "/api/find-similar",
                type: "GET",
                success: function(response) {
                    for (i = 0; i < response.length && i < 6; i++) {
                        var newSimilarElement = document.createElement("li");
                        newSimilarElement.textContent = response[i];
                        similarMusicResult.appendChild(newSimilarElement);
                    }
 
                },

                error: function(error) {
                    console.error("Error getSimilar Java method:", error);
                }

                });
        }


</script>


</html>
